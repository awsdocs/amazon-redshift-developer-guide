# ALTER USER<a name="r_ALTER_USER"></a>

Changes a database user account\. If you are the current user, you can change your own password\. For all other options, you must be a database superuser to execute this command\.

## Syntax<a name="r_ALTER_USER-synopsis"></a>

```
ALTER USER username [ WITH ] option [, ... ]

where option is

CREATEDB | NOCREATEDB 
| CREATEUSER | NOCREATEUSER 
| SYSLOG ACCESS { RESTRICTED | UNRESTRICTED }
| PASSWORD { 'password' | 'md5hash' | DISABLE }
[ VALID UNTIL 'expiration_date' ] 
| RENAME TO new_name |
| CONNECTION LIMIT { limit | UNLIMITED }
| SET parameter { TO | = } { value | DEFAULT } 
| RESET parameter
```

## Parameters<a name="r_ALTER_USER-parameters"></a>

 *username*   
Name of the user account\. 

WITH   
Optional keyword\. 

CREATEDB \| NOCREATEDB   
The CREATEDB option allows the user to create new databases\. NOCREATEDB is the default\. 

CREATEUSER \| NOCREATEUSER   
The CREATEUSER option creates a superuser with all database privileges, including CREATE USER\. The default is NOCREATEUSER\. For more information, see [Superusers](r_superusers.md)\.

SYSLOG ACCESS \{ RESTRICTED \| UNRESTRICTED \}  <a name="alter-user-syslog-access"></a>
A clause that specifies the level of access that the user has to the Amazon Redshift system tables and views\.   
If RESTRICTED is specified, the user can see only the rows generated by that user in user\-visible system tables and views\. The default is RESTRICTED\.   
If UNRESTRICTED is specified, the user can see all rows in user\-visible system tables and views, including rows generated by another user\. UNRESTRICTED doesn't give a regular user access to superuser\-visible tables\. Only superusers can see superuser\-visible tables\.   
Giving a user unrestricted access to system tables gives the user visibility to data generated by other users\. For example, STL\_QUERY and STL\_QUERYTEXT contain the full text of INSERT, UPDATE, and DELETE statements, which might contain sensitive user\-generated data\. 
All rows in STV\_RECENTS and SVV\_TRANSACTIONS are visible to all users\.   
For more information, see [Visibility of data in system tables and views](c_visibility-of-data.md)\.

PASSWORD \{ '*password*' \| '*md5hash*' \| DISABLE \}  
Sets the user's password\.   
By default, users can change their own passwords, unless the password is disabled\. To disable a user's password, specify DISABLE\. When a user's password is disabled, the password is deleted from the system and the user can log on only using temporary AWS Identity and Access Management \(IAM\) user credentials\. For more information, see [Using IAM authentication to generate database user credentials](https://docs.aws.amazon.com/redshift/latest/mgmt/generating-user-credentials.html)\. Only a superuser can enable or disable passwords\. You can't disable a superuser's password\. To enable a password, run ALTER USER and specify a password\.  
You can specify the password in clear text or as an MD5 hash string\.   
For clear text, the password must meet the following constraints:  
+ It must be 8 to 64 characters in length\.
+ It must contain at least one uppercase letter, one lowercase letter, and one number\.
+ It can use any ASCII characters with ASCII codes 33–126, except ' \(single quotation mark\), " \(double quotation mark\), \\, /, or @\. 
As a more secure alternative to passing the CREATE USER password parameter as clear text, you can specify an MD5 hash of a string that includes the password and user name\.   
When you specify an MD5 hash string, the ALTER USER command checks for a valid MD5 hash string, but it doesn't validate the password portion of the string\. It is possible in this case to create a password, such as an empty string, that you can't use to log on to the database\.
To specify an MD5 password, follow these steps:   

1. Concatenate the password and user name\. 

   For example, for password `ez` and user `user1`, the concatenated string is `ezuser1`\. 

1. Convert the concatenated string into a 32\-character MD5 hash string\. You can use any MD5 utility to create the hash string\. The following example uses the Amazon Redshift [MD5 function](r_MD5.md) and the concatenation operator \( \|\| \) to return a 32\-character MD5\-hash string\. 

   ```
   select md5('ez' || 'user1');
   md5                             
   --------------------------------
   153c434b4b77c89e6b94f12c5393af5b
   ```

1. Concatenate '`md5`' in front of the MD5 hash string and provide the concatenated string as the *md5hash* argument\.

   ```
   create user user1 password 'md5153c434b4b77c89e6b94f12c5393af5b';
   ```

1. Log on to the database using the user name and password\. 

   For this example, log on as `user1` with password `ez`\. 

VALID UNTIL '*expiration\_date*'   
Specifies that the password has an expiration date\. Use the value `'infinity'` to avoid having an expiration date\. The valid data type for this parameter is timestamp\. 

RENAME TO   
Renames the user account\. 

 *new\_name*   
New name of the user\. For more information about valid names, see [Names and identifiers](r_names.md)\.  
When you rename a user, you must also change the user’s password\. The user name is used as part of the password encryption, so when a user is renamed, the password is cleared\. The user will not be able to log on until the password is reset\. For example:   

```
alter user newuser password 'EXAMPLENewPassword11'; 
```

CONNECTION LIMIT \{ *limit* \| UNLIMITED \}   
The maximum number of database connections the user is permitted to have open concurrently\. The limit isn't enforced for superusers\. Use the UNLIMITED keyword to permit the maximum number of concurrent connections\.  A limit on the number of connections for each database might also apply\. For more information, see [CREATE DATABASE](r_CREATE_DATABASE.md)\. The default is UNLIMITED\. To view current connections, query the [STV\_SESSIONS](r_STV_SESSIONS.md) system view\.  
If both user and database connection limits apply, an unused connection slot must be available that is within both limits when a user attempts to connect\.

SET   
Sets a configuration parameter to a new default value for all sessions run by the specified user\. 

RESET   
Resets a configuration parameter to the original default value for the specified user\. 

 *parameter*   
Name of the parameter to set or reset\. 

 *value*   
New value of the parameter\. 

DEFAULT   
Sets the configuration parameter to the default value for all sessions run by the specified user\. 

## Usage notes<a name="r_ALTER_USER_usage_notes"></a>

When using AWS Identity and Access Management \(IAM\) authentication to create database user credentials, you might want to create a superuser that is able to log on only using temporary credentials\. You can't disable a superuser's password, but you can create an unknown password using a randomly generated MD5 hash string\.

```
alter user iam_superuser password 'md51234567890123456780123456789012';
```

When you set the [search\_path](r_search_path.md) parameter with the ALTER USER command, the modification takes effect on the specified user's next login\. If you want to change the search\_path for the current user and session, use a SET command\. 

## Examples<a name="r_ALTER_USER-examples"></a>

The following example gives the user ADMIN the privilege to create databases: 

```
alter user admin createdb;
```

The following example sets the password of the user ADMIN to `adminPass9` and sets an expiration date and time for the password: 

```
alter user admin password 'adminPass9'
valid until '2017-12-31 23:59';
```

The following example renames the user ADMIN to SYSADMIN: 

```
alter user admin rename to sysadmin;
```
